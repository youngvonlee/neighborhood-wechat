<!-- pages/community/secondhand/secondhand.wxml -->
<view class="container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="header">
    <view class="title">å°åŒºäºŒæ‰‹</view>
    <view class="subtitle">é—²ç½®ç‰©å“æ¢æ–°å®¶ï¼Œå˜åºŸä¸ºå®æ›´ç¯ä¿</view>
  </view>
  
  <!-- æœç´¢æ  -->
  <view class="search-bar">
    <view class="search-input-wrapper">
      <text class="search-icon">ğŸ”</text>
      <input 
        class="search-input" 
        placeholder="æœç´¢äºŒæ‰‹ç‰©å“" 
        value="{{searchKeyword}}"
        bindinput="onSearchInput"
        bindconfirm="searchItems"
      />
    </view>
    <view class="search-btn" bindtap="searchItems">æœç´¢</view>
  </view>
  
  <!-- å‘å¸ƒæŒ‰é’® -->
  <view class="publish-btn" bindtap="navigateToPublish">
    <text class="btn-text">å‘å¸ƒé—²ç½®</text>
    <text class="btn-icon">+</text>
  </view>
  
  <!-- åˆ†ç±»æ ‡ç­¾ -->
  <view class="category-tabs">
    <view 
      wx:for="{{categories}}" 
      wx:key="id" 
      class="tab {{activeCategory === item.id ? 'active' : ''}}"
      bindtap="switchCategory"
      data-category="{{item.id}}"
    >{{item.name}}</view>
  </view>
  
  <!-- ç‰©å“åˆ—è¡¨ -->
  <view class="items-list">
    <view wx:if="{{loading}}" class="loading-container">
      <view class="loading"></view>
    </view>
    
    <view wx:elif="{{items.length === 0}}" class="empty-container">
      <image class="empty-icon" src="/static/images/empty.png" mode="aspectFit"></image>
      <view class="empty-text">æš‚æ— äºŒæ‰‹ç‰©å“</view>
    </view>
    
    <view wx:else class="items-grid">
      <view 
        wx:for="{{items}}" 
        wx:key="id" 
        class="item-card"
        bindtap="navigateToDetail"
        data-id="{{item.id}}"
      >
        <image class="item-image" src="{{item.images[0]}}" mode="aspectFill"></image>
        <view class="item-info">
          <view class="item-title">{{item.title}}</view>
          <view class="item-price">Â¥ {{item.price}}</view>
          <view class="item-meta">
            <view class="item-location">{{item.location}}</view>
            <view class="item-time">{{item.publishTime}}</view>
          </view>
        </view>
      </view>
    </view>
  </view>
</view>